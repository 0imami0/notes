{"ast":null,"code":"import _objectSpread from\"/home/ima/Projects/notesDj/notes_back_end/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/ima/Projects/notesDj/notes_back_end/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ima/Projects/notesDj/notes_back_end/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ima/Projects/notesDj/notes_back_end/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[id]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(id));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(id,\"/update/\"),{method:'PUT',headers:{'content-type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(id,\"/delete/\"),{method:'DELETE',headers:{'content-type':'application/json'}});navigate('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(id!=='new'&&!note.body){deleteNote();}else if(id!=='new'){updateNote();}else if(id=='new'&&note!==null){createNote();}navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","ReactComponent","ArrowLeft","Link","NotePage","id","navigate","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","handleSubmit","e","target","value"],"sources":["/home/ima/Projects/notesDj/notes_back_end/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport{ReactComponent as ArrowLeft} from '../assets/arrow-left.svg'\nimport { Link } from 'react-router-dom'\n\n\nconst NotePage = () => {\n\n\tlet {id} = useParams()\n\tlet navigate = useNavigate()\n\n\tlet [note, setNote] = useState(null)\n\n\tuseEffect(() => {\n\t\tgetNote()\n\t}, [id])\n\n\n\tlet getNote = async() => {\n\t\tif (id === 'new') return\n\n\t\tlet response = await fetch(`/api/notes/${id}`)\n\t\tlet data = await response.json()\n\t\tsetNote(data)\n\t}\n\n\tlet createNote = async () => {\n\t\tfetch(`/api/notes/create/`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(note)\n\t\t})\t\n\t}\n\n\tlet updateNote = async () => {\n\t\tfetch(`/api/notes/${id}/update/`, {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(note)\n\t\t})\n\t}\n\n\tlet deleteNote = async () => {\n\t\tfetch(`/api/notes/${id}/delete/`, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'content-type' : 'application/json'\n\t\t\t}\n\t\t})\n\t\tnavigate('/')\n\t}\n\n\tlet handleSubmit = ()=> {\n\t\tif(id !== 'new' && !note.body){\n\t\t\tdeleteNote()\n\t\t}else if(id !== 'new'){\n\t\t\tupdateNote()\n\t\t}else if(id == 'new' && note !== null){\n\t\t\tcreateNote()\n\t\t}\n\t\tnavigate('/')\n\t}\n\t\n\n\n\treturn (\n\t\t<div className='note'>\n\t\t\t<div className='note-header'>\n\t\t\t\t<h3>\n\t\t\t\t\t<ArrowLeft onClick={handleSubmit}/>\n\t\t\t\t</h3>\n\t\t\t\t{id !== 'new' ? (\n\t\t\t\t\t<button onClick={deleteNote}>Delete</button>\n\t\t\t\t): (\n\t\t\t\t\t<button onClick={handleSubmit}>Done</button>\n\t\t\t\t)}\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<textarea onChange={(e) => { setNote({ ...note, 'body': e.target.value })}} value={note?.body}></textarea>\n\t\t</div>\n\t)\n}\n\nexport default NotePage"],"mappings":"+iBAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,kBAAvC,CACA,OAAOC,cAAc,GAAIC,UAAzB,KAAyC,0BAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAGA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAEtB,eAAWL,SAAS,EAApB,CAAKM,EAAL,YAAKA,EAAL,CACA,GAAIC,SAAQ,CAAGN,WAAW,EAA1B,CAEA,cAAsBF,QAAQ,CAAC,IAAD,CAA9B,wCAAKS,IAAL,eAAWC,OAAX,eAEAX,SAAS,CAAC,UAAM,CACfY,OAAO,GACP,CAFQ,CAEN,CAACJ,EAAD,CAFM,CAAT,CAKA,GAAII,QAAO,4FAAG,4JACTJ,EAAE,GAAK,KADE,wFAGQK,MAAK,sBAAeL,EAAf,EAHb,QAGTM,QAHS,qCAIIA,SAAQ,CAACC,IAAT,EAJJ,QAITC,IAJS,eAKbL,OAAO,CAACK,IAAD,CAAP,CALa,sDAAH,kBAAPJ,QAAO,0CAAX,CAQA,GAAIK,WAAU,6FAAG,0IAChBJ,KAAK,sBAAuB,CAC3BK,MAAM,CAAE,MADmB,CAE3BC,OAAO,CAAE,CACR,eAAgB,kBADR,CAFkB,CAK3BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALqB,CAAvB,CAAL,CADgB,wDAAH,kBAAVO,WAAU,2CAAd,CAUA,GAAIM,WAAU,6FAAG,0IAChBV,KAAK,sBAAeL,EAAf,aAA6B,CACjCU,MAAM,CAAE,KADyB,CAEjCC,OAAO,CAAE,CACR,eAAgB,kBADR,CAFwB,CAKjCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CAL2B,CAA7B,CAAL,CADgB,wDAAH,kBAAVa,WAAU,2CAAd,CAUA,GAAIC,WAAU,6FAAG,0IAChBX,KAAK,sBAAeL,EAAf,aAA6B,CACjCU,MAAM,CAAE,QADyB,CAEjCC,OAAO,CAAE,CACR,eAAiB,kBADT,CAFwB,CAA7B,CAAL,CAMAV,QAAQ,CAAC,GAAD,CAAR,CAPgB,wDAAH,kBAAVe,WAAU,2CAAd,CAUA,GAAIC,aAAY,CAAG,QAAfA,aAAe,EAAK,CACvB,GAAGjB,EAAE,GAAK,KAAP,EAAgB,CAACE,IAAI,CAACU,IAAzB,CAA8B,CAC7BI,UAAU,GACV,CAFD,IAEM,IAAGhB,EAAE,GAAK,KAAV,CAAgB,CACrBe,UAAU,GACV,CAFK,IAEA,IAAGf,EAAE,EAAI,KAAN,EAAeE,IAAI,GAAK,IAA3B,CAAgC,CACrCO,UAAU,GACV,CACDR,QAAQ,CAAC,GAAD,CAAR,CACA,CATD,CAaA,mBACC,aAAK,SAAS,CAAC,MAAf,wBACC,aAAK,SAAS,CAAC,aAAf,wBACC,iCACC,KAAC,SAAD,EAAW,OAAO,CAAEgB,YAApB,EADD,EADD,CAIEjB,EAAE,GAAK,KAAP,cACA,eAAQ,OAAO,CAAEgB,UAAjB,oBADA,cAGA,eAAQ,OAAO,CAAEC,YAAjB,kBAPF,GADD,cAYC,iBAAU,QAAQ,CAAE,kBAACC,CAAD,CAAO,CAAEf,OAAO,gCAAMD,IAAN,MAAY,OAAQgB,CAAC,CAACC,MAAF,CAASC,KAA7B,GAAP,CAA6C,CAA1E,CAA4E,KAAK,CAAElB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEU,IAAzF,EAZD,GADD,CAgBA,CA/ED,CAiFA,cAAeb,SAAf"},"metadata":{},"sourceType":"module"}